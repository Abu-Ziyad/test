<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงูุฎุฒูุฉ</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Stylesheet (New Mobile-First Design) -->
    <link rel="stylesheet" href="mobile-style.css"> <!-- Changed stylesheet link -->

    <!-- Supabase Library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="theme-light">

    <!-- 1. ุดุงุดุฉ ุงููุตุงุฏูุฉ (ุชุณุฌูู ุงูุฏุฎูู / ุญุณุงุจ ุฌุฏูุฏ) -->
    <div id="auth-view" class="view">
        <div class="auth-container glassmorphism-card">
            <div id="login-form-container">
                <h2>ุชุณุฌูู ุงูุฏุฎูู ุฅูู ุงูุฎุฒูุฉ</h2>
                <form id="login-form">
                    <input type="email" id="login-email" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู" required>
                    <input type="password" id="login-password" placeholder="ูููุฉ ุงููุฑูุฑ" required>
                    <button type="submit" class="primary-btn">ุฏุฎูู</button>
                </form>
                <p>ููุณ ูุฏูู ุญุณุงุจุ <a href="#" id="show-signup">ุฃูุดุฆ ุญุณุงุจูุง</a></p>
            </div>
            <div id="signup-container" style="display: none;"> 
                <h2>ุญุณุงุจ ุฌุฏูุฏ</h2>
                <form id="signup-form">
                    <input type="email" id="signup-email" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู" required>
                    <input type="password" id="signup-password" placeholder="ูููุฉ ุงููุฑูุฑ" required>
                    <button type="submit" class="primary-btn">ุชุณุฌูู</button>
                </form>
                <p>ูุฏูู ุญุณุงุจ ุจุงููุนูุ <a href="#" id="show-login">ุณุฌู ุงูุฏุฎูู</a></p>
            </div>
        </div>
    </div>

    <!-- 2. ุงููุงุฌูุฉ ุงูุฑุฆูุณูุฉ (ุนุฑุถ ุงููุฌูุฏุงุช) -->
    <div id="main-view" class="view hidden">
        <header class="glassmorphism-header">
            <h1>ุงูุฎุฒูุฉ</h1>
            <div class="header-controls">
                <input type="search" id="search-input" placeholder="ุงุจุญุซ ูู ุงููุฌูุฏุงุช...">
                <button id="theme-toggle" class="secondary-btn">ุชุจุฏูู ุงููุถุน</button>
                <button id="logout-button" class="secondary-btn">ุชุณุฌูู ุงูุฎุฑูุฌ</button>
            </div>
        </header>
        <main>
            <div class="toolbar">
                <h2>ูุฌูุฏุงุชู</h2>
                <button id="add-folder-button" class="primary-btn">+ ูุฌูุฏ ุฌุฏูุฏ</button>
            </div>
            <div id="folders-list" class="grid-container">
                <!-- ุงููุฌูุฏุงุช ุณุชูุนุฑุถ ููุง ุนุจุฑ JavaScript -->
            </div>
        </main>
        <!-- Bottom Navigation Bar for Mobile -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-view="folders">
                <span class="icon">๐</span>
                <span class="text">ุงููุฌูุฏุงุช</span>
            </button>
            <button class="nav-item" data-view="recent">
                <span class="icon">๐</span>
                <span class="text">ุงูุญุฏูุซุฉ</span>
            </button>
            <button class="nav-item" data-view="favorites">
                <span class="icon">โญ</span>
                <span class="text">ุงูููุถูุฉ</span>
            </button>
            <button class="nav-item" data-view="settings">
                <span class="icon">โ๏ธ</span>
                <span class="text">ุงูุฅุนุฏุงุฏุงุช</span>
            </button>
        </nav>
    </div>

    <!-- 3. ูุงุฌูุฉ ุนุฑุถ ูุญุชููุงุช ุงููุฌูุฏ -->
    <div id="folder-content-view" class="view hidden">
        <header class="glassmorphism-header">
            <h1 id="folder-title-placeholder"></h1>
            <div class="header-controls">
                <button id="back-to-folders-button" class="secondary-btn">ุงูุนูุฏุฉ ูููุฌูุฏุงุช</button>
                <button id="theme-toggle-inner" class="secondary-btn">ุชุจุฏูู ุงููุถุน</button>
                <button id="logout-button-inner" class="secondary-btn">ุชุณุฌูู ุงูุฎุฑูุฌ</button>
            </div>
        </header>
        <main>
             <div class="toolbar">
                <h2 id="current-folder-name">ูุญุชููุงุช ุงููุฌูุฏ</h2>
                <button id="add-file-button" class="primary-btn">+ ุฅุถุงูุฉ ุนูุตุฑ</button>
            </div>
            <div id="files-list" class="grid-container">
                <!-- ุงููููุงุช ุณุชูุนุฑุถ ููุง -->
            </div>
        </main>
        <!-- Bottom Navigation Bar for Mobile (also in folder view) -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-view="folders">
                <span class="icon">๐</span>
                <span class="text">ุงููุฌูุฏุงุช</span>
            </button>
            <button class="nav-item" data-view="recent">
                <span class="icon">๐</span>
                <span class="text">ุงูุญุฏูุซุฉ</span>
            </button>
            <button class="nav-item" data-view="favorites">
                <span class="icon">โญ</span>
                <span class="text">ุงูููุถูุฉ</span>
            </button>
            <button class="nav-item" data-view="settings">
                <span class="icon">โ๏ธ</span>
                <span class="text">ุงูุฅุนุฏุงุฏุงุช</span>
            </button>
        </nav>
    </div>

    <!-- ุงูููุงูุฐ ุงูููุจุซูุฉ (Modals) -->
    <div id="folder-modal" class="modal hidden">
        <div class="modal-content glassmorphism-card">
            <span class="close-button">&times;</span>
            <h3 id="modal-title">ูุฌูุฏ ุฌุฏูุฏ</h3>
            <form id="folder-form">
                <label for="folder-name">ุงุณู ุงููุฌูุฏ:</label>
                <input type="text" id="folder-name" required>
                <label for="folder-description">ูุตู (ุงุฎุชูุงุฑู):</label>
                <textarea id="folder-description" rows="3"></textarea>
                <button type="submit" class="primary-btn">ุญูุธ</button>
            </form>
        </div>
    </div>
    
    <div id="file-modal" class="modal hidden">
        <div class="modal-content glassmorphism-card">
            <span class="close-button">&times;</span>
            <h3>ุฅุถุงูุฉ ุนูุตุฑ ุฌุฏูุฏ</h3>
            <form id="file-form">
                 <label for="file-name">ุงุณู ุงูุนูุตุฑ:</label>
                 <input type="text" id="file-name" required>
                 <label for="file-type">ููุน ุงูุนูุตุฑ:</label>
                 <select id="file-type">
                     <option value="note">ููุงุญุธุฉ ูุตูุฉ</option>
                     <option value="image">ุตูุฑุฉ</option>
                     <option value="video">ููุฏูู</option>
                     <option value="pdf">ููู PDF</option>
                 </select>
                 <div id="note-content-wrapper">
                    <label for="note-content">ุงููุญุชูู:</label>
                    <textarea id="note-content" rows="5"></textarea>
                 </div>
                 <div id="file-upload-wrapper" class="hidden">
                    <label for="file-upload">ุงุฎุชุฑ ููููุง:</label>
                    <input type="file" id="file-upload">
                 </div>
                 <button type="submit" class="primary-btn">ุญูุธ ุงูุนูุตุฑ</button>
            </form>
        </div>
    </div>

    <!-- ุฏุงุฆุฑุฉ ุงูุชุญููู -->
    <div id="loading-spinner" class="hidden">
        <div class="spinner"></div>
    </div>

    <!-- JavaScript Files -->
    <script src="supabase-client.js"></script>
    <script src="app.js"></script>
    <!-- You can add a new JS file here for mobile-specific interactions if needed -->
    <!-- <script src="mobile-interactions.js"></script> -->
</body>
</html>
